
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Low-latency QUIC-based pub/sub and distributed cache system">
      
      
        <meta name="author" content="Felix Authors">
      
      
        <link rel="canonical" href="https://gabloe.github.io/felix/architecture/semantics/">
      
      
        <link rel="prev" href="../wire-protocol/">
      
      
        <link rel="next" href="../../api/broker-api/">
      
      
        
      
      
      <link rel="icon" href="../../assets/logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Semantics - Felix</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/timeago.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#delivery-semantics-and-consistency-model" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Felix" class="md-header__button md-logo" aria-label="Felix" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Felix
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Semantics
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/gabloe/felix" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    gabloe/felix
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../getting-started/overview/" class="md-tabs__link">
          
  
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../system-design/" class="md-tabs__link">
          
  
  
  Architecture

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../api/broker-api/" class="md-tabs__link">
          
  
  
  API Documentation

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../features/quic-transport/" class="md-tabs__link">
          
  
  
  Features

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../deployment/local/" class="md-tabs__link">
          
  
  
  Deployment

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../reference/configuration/" class="md-tabs__link">
          
  
  
  Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../development/contributing/" class="md-tabs__link">
          
  
  
  Development

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Felix" class="md-nav__button md-logo" aria-label="Felix" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    Felix
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/gabloe/felix" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    gabloe/felix
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quickstart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Architecture
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../system-design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    System Design
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../components/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Components
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../wire-protocol/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Wire Protocol
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Semantics
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Semantics
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#philosophy-explicit-over-implicit" class="md-nav__link">
    <span class="md-ellipsis">
      
        Philosophy: Explicit Over Implicit
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pubsub-delivery-semantics" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pub/Sub Delivery Semantics
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pub/Sub Delivery Semantics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#delivery-guarantees-mvp" class="md-nav__link">
    <span class="md-ellipsis">
      
        Delivery Guarantees (MVP)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#planned-delivery-guarantees-future" class="md-nav__link">
    <span class="md-ellipsis">
      
        Planned Delivery Guarantees (Future)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#message-ordering" class="md-nav__link">
    <span class="md-ellipsis">
      
        Message Ordering
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fanout-fairness" class="md-nav__link">
    <span class="md-ellipsis">
      
        Fanout Fairness
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#publisher-backpressure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Publisher Backpressure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disconnection-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      
        Disconnection Behavior
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cache-semantics" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cache Semantics
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Cache Semantics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#consistency-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        Consistency Model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ttl-and-expiration" class="md-nav__link">
    <span class="md-ellipsis">
      
        TTL and Expiration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cache-scoping" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cache Scoping
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eviction-policy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Eviction Policy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#concurrency-and-race-conditions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Concurrency and Race Conditions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cache-vs-pubsub-integration-future" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cache vs. Pub/Sub Integration (Future)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tenant-and-namespace-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tenant and Namespace Model
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Tenant and Namespace Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#existence-enforcement" class="md-nav__link">
    <span class="md-ellipsis">
      
        Existence Enforcement
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authorization-planned" class="md-nav__link">
    <span class="md-ellipsis">
      
        Authorization (Planned)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quota-enforcement-planned" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quota Enforcement (Planned)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#consistency-across-components" class="md-nav__link">
    <span class="md-ellipsis">
      
        Consistency Across Components
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Consistency Across Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#broker-internal-consistency" class="md-nav__link">
    <span class="md-ellipsis">
      
        Broker Internal Consistency
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multi-broker-consistency-future" class="md-nav__link">
    <span class="md-ellipsis">
      
        Multi-Broker Consistency (Future)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#failure-scenarios-and-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Scenarios and Behavior
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Failure Scenarios and Behavior">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#network-partition" class="md-nav__link">
    <span class="md-ellipsis">
      
        Network Partition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#broker-failure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Broker Failure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#slow-subscriber-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      
        Slow Subscriber Behavior
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-semantics" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing Semantics
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Testing Semantics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#conformance-testing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conformance Testing
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary-semantic-guarantees-matrix" class="md-nav__link">
    <span class="md-ellipsis">
      
        Summary: Semantic Guarantees Matrix
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recommendations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Recommendations
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Recommendations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#choosing-delivery-semantics" class="md-nav__link">
    <span class="md-ellipsis">
      
        Choosing Delivery Semantics
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cache-usage-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cache Usage Patterns
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API Documentation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Documentation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/broker-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Broker API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/control-plane-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Control Plane API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/client-sdk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Client SDK
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Features
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Features
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/quic-transport/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    QUIC Transport
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/pubsub/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pub/Sub Streaming
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/cache/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Distributed Cache
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/performance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Performance Tuning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/observability/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Observability
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Security
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Deployment
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Deployment
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/local/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Local Development
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/docker-compose/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Docker Compose
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/kubernetes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Kubernetes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/environment-variables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Environment Variables
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Troubleshooting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FAQ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Development
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Development
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/building/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Building & Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/project-structure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Project Structure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#philosophy-explicit-over-implicit" class="md-nav__link">
    <span class="md-ellipsis">
      
        Philosophy: Explicit Over Implicit
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pubsub-delivery-semantics" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pub/Sub Delivery Semantics
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pub/Sub Delivery Semantics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#delivery-guarantees-mvp" class="md-nav__link">
    <span class="md-ellipsis">
      
        Delivery Guarantees (MVP)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#planned-delivery-guarantees-future" class="md-nav__link">
    <span class="md-ellipsis">
      
        Planned Delivery Guarantees (Future)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#message-ordering" class="md-nav__link">
    <span class="md-ellipsis">
      
        Message Ordering
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fanout-fairness" class="md-nav__link">
    <span class="md-ellipsis">
      
        Fanout Fairness
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#publisher-backpressure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Publisher Backpressure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disconnection-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      
        Disconnection Behavior
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cache-semantics" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cache Semantics
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Cache Semantics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#consistency-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        Consistency Model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ttl-and-expiration" class="md-nav__link">
    <span class="md-ellipsis">
      
        TTL and Expiration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cache-scoping" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cache Scoping
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eviction-policy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Eviction Policy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#concurrency-and-race-conditions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Concurrency and Race Conditions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cache-vs-pubsub-integration-future" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cache vs. Pub/Sub Integration (Future)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tenant-and-namespace-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tenant and Namespace Model
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Tenant and Namespace Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#existence-enforcement" class="md-nav__link">
    <span class="md-ellipsis">
      
        Existence Enforcement
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authorization-planned" class="md-nav__link">
    <span class="md-ellipsis">
      
        Authorization (Planned)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quota-enforcement-planned" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quota Enforcement (Planned)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#consistency-across-components" class="md-nav__link">
    <span class="md-ellipsis">
      
        Consistency Across Components
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Consistency Across Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#broker-internal-consistency" class="md-nav__link">
    <span class="md-ellipsis">
      
        Broker Internal Consistency
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multi-broker-consistency-future" class="md-nav__link">
    <span class="md-ellipsis">
      
        Multi-Broker Consistency (Future)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#failure-scenarios-and-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Scenarios and Behavior
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Failure Scenarios and Behavior">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#network-partition" class="md-nav__link">
    <span class="md-ellipsis">
      
        Network Partition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#broker-failure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Broker Failure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#slow-subscriber-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      
        Slow Subscriber Behavior
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-semantics" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing Semantics
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Testing Semantics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#conformance-testing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conformance Testing
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary-semantic-guarantees-matrix" class="md-nav__link">
    <span class="md-ellipsis">
      
        Summary: Semantic Guarantees Matrix
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recommendations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Recommendations
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Recommendations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#choosing-delivery-semantics" class="md-nav__link">
    <span class="md-ellipsis">
      
        Choosing Delivery Semantics
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cache-usage-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cache Usage Patterns
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="delivery-semantics-and-consistency-model">Delivery Semantics and Consistency Model<a class="headerlink" href="#delivery-semantics-and-consistency-model" title="Permanent link">&para;</a></h1>
<p>Felix provides explicit, tunable delivery guarantees and consistency semantics. This document defines the behavioral contract that applications can rely on when building systems with Felix.</p>
<h2 id="philosophy-explicit-over-implicit">Philosophy: Explicit Over Implicit<a class="headerlink" href="#philosophy-explicit-over-implicit" title="Permanent link">&para;</a></h2>
<p>Felix makes trade-offs explicit rather than hiding them behind ambiguous guarantees. Every semantic choice has observable behavior that can be tested and reasoned about.</p>
<div class="admonition note">
<p class="admonition-title">MVP Scope</p>
<p>This document describes both current MVP semantics and planned future semantics. MVP limitations are clearly marked.</p>
</div>
<h2 id="pubsub-delivery-semantics">Pub/Sub Delivery Semantics<a class="headerlink" href="#pubsub-delivery-semantics" title="Permanent link">&para;</a></h2>
<h3 id="delivery-guarantees-mvp">Delivery Guarantees (MVP)<a class="headerlink" href="#delivery-guarantees-mvp" title="Permanent link">&para;</a></h3>
<p><strong>Current guarantee: At-most-once</strong></p>
<p>In the MVP, Felix provides <strong>at-most-once</strong> delivery semantics for pub/sub:</p>
<ul>
<li>Messages are delivered to subscribers zero or one time</li>
<li>No retries or redelivery</li>
<li>No acknowledgements from subscribers</li>
<li>Slow subscribers may drop messages without notification</li>
</ul>
<p>This semantic is appropriate for:
- Real-time signals where latest value matters most
- High-frequency metrics and telemetry
- Workloads where occasional loss is acceptable
- Applications that implement their own deduplication</p>
<div class="admonition warning">
<p class="admonition-title">Message Loss Scenarios</p>
<p>Messages can be lost when:
- Subscriber falls behind buffer capacity
- Network partition between broker and subscriber
- Subscriber disconnects without draining buffer
- Broker restarts (no durability in MVP)</p>
</div>
<p><strong>Example at-most-once workload</strong>:</p>
<div class="language-rust highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1">// Real-time sensor data where latest reading matters most</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">subscription</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">subscribe</span><span class="p">(</span><span class="s">&quot;sensors&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;temperature&quot;</span><span class="p">).</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="k">while</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">subscription</span><span class="p">.</span><span class="n">next</span><span class="p">().</span><span class="k">await</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">    </span><span class="c1">// Process latest temperature reading</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">    </span><span class="c1">// If we miss a reading, the next one will arrive soon</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">    </span><span class="n">update_dashboard</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">payload</span><span class="p">);</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="planned-delivery-guarantees-future">Planned Delivery Guarantees (Future)<a class="headerlink" href="#planned-delivery-guarantees-future" title="Permanent link">&para;</a></h3>
<p><strong>At-least-once delivery</strong> (planned):</p>
<ul>
<li>Messages delivered one or more times</li>
<li>Subscriber acknowledgements required</li>
<li>Broker retries unacknowledged messages</li>
<li>Requires durable storage</li>
<li>Applications must handle duplicates</li>
</ul>
<p><strong>Exactly-once semantics</strong> (future):</p>
<ul>
<li>Messages delivered exactly one time (from application perspective)</li>
<li>Idempotent producers with sequence numbers</li>
<li>Transactional coordination</li>
<li>Deduplication on receive side</li>
</ul>
<p>Configuration example (future):</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nt">streams</span><span class="p">:</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">orders</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">    </span><span class="nt">delivery</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">at_least_once</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">    </span><span class="nt">retention</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7d</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">transactions</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">    </span><span class="nt">delivery</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">exactly_once</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">    </span><span class="nt">retention</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30d</span>
</span></code></pre></div>
<h3 id="message-ordering">Message Ordering<a class="headerlink" href="#message-ordering" title="Permanent link">&para;</a></h3>
<p><strong>Within a stream</strong>: Ordering is preserved per publisher-broker-subscriber path.</p>
<pre class="mermaid"><code>graph LR
    P[Publisher] --&gt;|msg 1, 2, 3| B[Broker]
    B --&gt;|msg 1, 2, 3| S[Subscriber]

    style P fill:#e3f2fd
    style B fill:#fff9c4
    style S fill:#c8e6c9</code></pre>
<p><strong>Guarantees</strong>:
- Messages from a single publisher to a stream arrive in send order
- A single subscriber sees messages in the order they were enqueued
- Order is preserved through batching and fanout</p>
<p><strong>Across streams</strong>: No ordering guarantees.</p>
<pre class="mermaid"><code>graph LR
    P[Publisher]
    P --&gt;|msg A| S1[Stream 1]
    P --&gt;|msg B| S2[Stream 2]

    Sub[Subscriber]
    S1 --&gt; Sub
    S2 --&gt; Sub

    Note[msg A and B may arrive in any order]

    style P fill:#e3f2fd
    style Sub fill:#c8e6c9</code></pre>
<p><strong>Example</strong>:</p>
<div class="language-rust highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1">// Publish to two streams</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="n">client</span><span class="p">.</span><span class="n">publish</span><span class="p">(</span><span class="s">&quot;events&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;user-login&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">login_event</span><span class="p">).</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="n">client</span><span class="p">.</span><span class="n">publish</span><span class="p">(</span><span class="s">&quot;events&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;audit-log&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">audit_event</span><span class="p">).</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="c1">// Subscribers to user-login and audit-log may see events in any relative order</span>
</span></code></pre></div>
<p><strong>Ordering within batches</strong>:</p>
<div class="language-rust highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1">// Batch publish preserves order within the batch</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="kd">let</span><span class="w"> </span><span class="n">messages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="n">msg1</span><span class="p">,</span><span class="w"> </span><span class="n">msg2</span><span class="p">,</span><span class="w"> </span><span class="n">msg3</span><span class="p">];</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="n">client</span><span class="p">.</span><span class="n">publish_batch</span><span class="p">(</span><span class="s">&quot;events&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;orders&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">messages</span><span class="p">).</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="c1">// Subscribers will see msg1, msg2, msg3 in that order</span>
</span></code></pre></div>
<h3 id="fanout-fairness">Fanout Fairness<a class="headerlink" href="#fanout-fairness" title="Permanent link">&para;</a></h3>
<p>Felix enforces <strong>subscriber isolation</strong>: slow subscribers never block fast subscribers.</p>
<pre class="mermaid"><code>graph TB
    P[Publisher] --&gt; B[Broker]
    B --&gt; S1[Fast Subscriber]
    B --&gt; S2[Slow Subscriber]
    B --&gt; S3[Fast Subscriber]

    S1 --&gt;|Processing msgs 1-100| D1[Dashboard]
    S2 --&gt;|Still on msg 23, dropping msgs| D2[Slow System]
    S3 --&gt;|Processing msgs 1-100| D3[Analytics]

    style S1 fill:#c8e6c9
    style S2 fill:#ffccbc
    style S3 fill:#c8e6c9</code></pre>
<p><strong>Isolation mechanism</strong>:</p>
<p>Each subscription maintains an independent buffer:</p>
<div class="language-rust highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">Subscription</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">    </span><span class="n">buffer</span>: <span class="nc">BoundedQueue</span><span class="o">&lt;</span><span class="n">Event</span><span class="o">&gt;</span><span class="p">,</span><span class="w">  </span><span class="c1">// Per-subscription buffer</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">    </span><span class="n">event_stream</span>: <span class="nc">UnidirectionalStream</span><span class="p">,</span><span class="w">  </span><span class="c1">// Independent QUIC stream</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>Buffer behavior</strong>:</p>
<ul>
<li>Each subscriber has <code>event_queue_depth</code> buffer slots (default: 1024)</li>
<li>When buffer fills, new events are <strong>dropped for that subscriber only</strong></li>
<li>Other subscribers continue receiving events normally</li>
<li>No explicit notification of drops in MVP (future: lag metrics)</li>
</ul>
<p><strong>Configuration</strong>:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1"># Broker config</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="nt">event_queue_depth</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1024</span><span class="w">  </span><span class="c1"># Per-subscriber buffer size</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="c1"># Larger buffer tolerates more bursty subscribers</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="nt">event_queue_depth</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4096</span><span class="w">  </span><span class="c1"># Trade memory for burst tolerance</span>
</span></code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Sizing Buffer Depth</p>
<p>Choose <code>event_queue_depth</code> based on:
- Expected subscriber processing latency variance
- Memory budget (depth  average event size  subscriber count)
- Tolerance for temporary slowdowns</p>
<p>For latency-sensitive workloads with consistent throughput: 512-1024
For bursty workloads with high fanout: 2048-4096</p>
</div>
<h3 id="publisher-backpressure">Publisher Backpressure<a class="headerlink" href="#publisher-backpressure" title="Permanent link">&para;</a></h3>
<p><strong>Publisher behavior</strong>: Publishing never blocks on subscriber speed.</p>
<pre class="mermaid"><code>sequenceDiagram
    participant P as Publisher
    participant B as Broker Queue
    participant F as Fanout Workers
    participant S1 as Fast Subscriber
    participant S2 as Slow Subscriber

    P-&gt;&gt;B: publish_batch
    B--&gt;&gt;P: ack (immediate)
    B-&gt;&gt;F: dequeue for fanout
    par Independent fanout
        F-&gt;&gt;S1: deliver events
    and
        F-&gt;&gt;S2: deliver events (buffer fills, drops)
    end

    Note over P: Publisher never waits for subscribers</code></pre>
<p><strong>Publisher queue</strong>:</p>
<p>Publishers write to a bounded queue with configurable depth:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nt">pub_queue_depth</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1024</span><span class="w">  </span><span class="c1"># Bounded publish queue</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="nt">publish_queue_wait_timeout_ms</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2000</span><span class="w">  </span><span class="c1"># Timeout if queue full</span>
</span></code></pre></div>
<p>When the publish queue is full:
- New publishes block up to <code>publish_queue_wait_timeout_ms</code>
- After timeout, publish fails with error
- This indicates broker overload (too many publishes, insufficient workers)</p>
<p><strong>Tuning publish pipeline</strong>:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="c1"># Increase parallelism</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="nt">pub_workers_per_conn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="c1"># Increase buffer (trades latency for burst tolerance)</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="nt">pub_queue_depth</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2048</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="c1"># Faster timeout for fail-fast behavior</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="nt">publish_queue_wait_timeout_ms</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000</span>
</span></code></pre></div>
<h3 id="disconnection-behavior">Disconnection Behavior<a class="headerlink" href="#disconnection-behavior" title="Permanent link">&para;</a></h3>
<p><strong>Subscriber disconnects</strong>:</p>
<ul>
<li>Subscription is immediately removed from registry</li>
<li>Buffered events for that subscriber are discarded</li>
<li>No redelivery when subscriber reconnects</li>
<li>Subscriber must re-subscribe (starts from tail)</li>
</ul>
<p><strong>Publisher disconnects</strong>:</p>
<ul>
<li>In-flight publishes may be lost if not acknowledged</li>
<li>No automatic retry or persistence of unacked publishes</li>
<li>Application must handle reconnection and retry logic</li>
</ul>
<p><strong>Broker restarts</strong>:</p>
<ul>
<li>All in-memory state is lost (ephemeral storage in MVP)</li>
<li>Active subscriptions are terminated</li>
<li>Clients detect connection loss and must reconnect</li>
<li>No historical replay available</li>
</ul>
<h2 id="cache-semantics">Cache Semantics<a class="headerlink" href="#cache-semantics" title="Permanent link">&para;</a></h2>
<h3 id="consistency-model">Consistency Model<a class="headerlink" href="#consistency-model" title="Permanent link">&para;</a></h3>
<p>Felix cache provides <strong>eventual consistency</strong> with <strong>read-your-writes</strong> for single clients:</p>
<pre class="mermaid"><code>sequenceDiagram
    participant C1 as Client 1
    participant B as Broker Cache
    participant C2 as Client 2

    C1-&gt;&gt;B: put(key=X, value=1)
    B--&gt;&gt;C1: ok
    C1-&gt;&gt;B: get(key=X)
    B--&gt;&gt;C1: value=1

    Note over C2: Concurrent get may see old value briefly
    C2-&gt;&gt;B: get(key=X)
    B--&gt;&gt;C2: value=1 (or old value)</code></pre>
<p><strong>Guarantees</strong>:</p>
<ol>
<li><strong>Read-your-writes</strong>: Client sees its own writes immediately</li>
<li><strong>Monotonic reads</strong>: Client never sees older values after newer ones (single session)</li>
<li><strong>Eventual consistency</strong>: All clients eventually see the latest value</li>
<li><strong>No dirty reads</strong>: Clients never see partial or uncommitted writes</li>
</ol>
<p><strong>Not guaranteed</strong>:</p>
<ul>
<li>Linearizability across clients</li>
<li>Causal consistency across keys</li>
<li>Multi-key transactions</li>
</ul>
<h3 id="ttl-and-expiration">TTL and Expiration<a class="headerlink" href="#ttl-and-expiration" title="Permanent link">&para;</a></h3>
<p><strong>TTL semantics</strong>:</p>
<div class="language-rust highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c1">// Store with 60-second TTL</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="n">client</span><span class="p">.</span><span class="n">cache_put</span><span class="p">(</span><span class="s">&quot;session&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">session_id</span><span class="p">,</span><span class="w"> </span><span class="n">session_data</span><span class="p">,</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="mi">60_000</span><span class="p">)).</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="c1">// Store without expiration</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="n">client</span><span class="p">.</span><span class="n">cache_put</span><span class="p">(</span><span class="s">&quot;config&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">config_key</span><span class="p">,</span><span class="w"> </span><span class="n">config_value</span><span class="p">,</span><span class="w"> </span><span class="nb">None</span><span class="p">).</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>
</span></code></pre></div>
<p><strong>Expiration behavior</strong>:</p>
<ul>
<li>TTL countdown starts when <code>cache_put</code> returns <code>ok</code></li>
<li>Expiration is <strong>lazy</strong>: checked on access, not proactively</li>
<li>Expired entries return <code>null</code> on <code>cache_get</code></li>
<li>Expired entries may occupy memory until accessed or evicted</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">TTL Precision</p>
<p>TTL enforcement is best-effort. Under high load, expired entries might be accessible for short periods after TTL expires. This is typically &lt; 100ms but not guaranteed.</p>
</div>
<h3 id="cache-scoping">Cache Scoping<a class="headerlink" href="#cache-scoping" title="Permanent link">&para;</a></h3>
<p>Cache entries are scoped to <code>(tenant_id, namespace, cache_name, key)</code>:</p>
<div class="language-rust highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="c1">// These are independent cache entries:</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="n">client</span><span class="p">.</span><span class="n">cache_put_scoped</span><span class="p">(</span><span class="s">&quot;tenant1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;prod&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sessions&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;user123&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="p">).</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="n">client</span><span class="p">.</span><span class="n">cache_put_scoped</span><span class="p">(</span><span class="s">&quot;tenant1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;staging&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sessions&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;user123&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="p">).</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="n">client</span><span class="p">.</span><span class="n">cache_put_scoped</span><span class="p">(</span><span class="s">&quot;tenant2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;prod&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sessions&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;user123&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="p">).</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>
</span></code></pre></div>
<p><strong>Isolation guarantees</strong>:</p>
<ul>
<li>Different tenants cannot access each other's cache entries</li>
<li>Different namespaces within a tenant are isolated</li>
<li>Keys are unique only within their (tenant, namespace, cache) scope</li>
</ul>
<h3 id="eviction-policy">Eviction Policy<a class="headerlink" href="#eviction-policy" title="Permanent link">&para;</a></h3>
<p><strong>MVP policy</strong>: Best-effort eviction when memory pressure occurs.</p>
<ul>
<li>No guaranteed LRU or LFU policy</li>
<li>Eviction is opportunistic</li>
<li>Applications should not rely on specific eviction order</li>
</ul>
<p><strong>Capacity configuration</strong> (future):</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nt">caches</span><span class="p">:</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">tenant</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tenant1</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prod</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">    </span><span class="nt">cache</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sessions</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="w">    </span><span class="nt">max_entries</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100000</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">    </span><span class="nt">max_bytes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1GB</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">    </span><span class="nt">eviction_policy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lru</span>
</span></code></pre></div>
<h3 id="concurrency-and-race-conditions">Concurrency and Race Conditions<a class="headerlink" href="#concurrency-and-race-conditions" title="Permanent link">&para;</a></h3>
<p><strong>Concurrent writes to same key</strong>:</p>
<pre class="mermaid"><code>sequenceDiagram
    participant C1 as Client 1
    participant C2 as Client 2
    participant B as Broker

    par Concurrent puts
        C1-&gt;&gt;B: put(key=X, value=A)
    and
        C2-&gt;&gt;B: put(key=X, value=B)
    end

    Note over B: Last write wins (undefined order)

    C1-&gt;&gt;B: get(key=X)
    B--&gt;&gt;C1: value=A or value=B</code></pre>
<p><strong>Behavior</strong>: Last write wins, but order is undefined for concurrent writes.</p>
<p><strong>No atomic operations in MVP</strong>:</p>
<ul>
<li>No compare-and-swap</li>
<li>No atomic increment</li>
<li>No multi-key transactions</li>
</ul>
<p><strong>Planned features</strong>:</p>
<ul>
<li>Conditional put (if-not-exists, if-match)</li>
<li>Atomic increment/decrement</li>
<li>Watch/notify on key changes</li>
</ul>
<h3 id="cache-vs-pubsub-integration-future">Cache vs. Pub/Sub Integration (Future)<a class="headerlink" href="#cache-vs-pubsub-integration-future" title="Permanent link">&para;</a></h3>
<p>Planned feature: Pub/sub invalidation for cache consistency.</p>
<div class="language-rust highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="c1">// Publish invalidates cache entry</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="n">client</span><span class="p">.</span><span class="n">publish_with_invalidation</span><span class="p">(</span><span class="s">&quot;events&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;user-updated&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">event</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">    </span><span class="fm">vec!</span><span class="p">[</span><span class="s">&quot;cache:sessions:user123&quot;</span><span class="p">]).</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="c1">// Subscribers and cache both receive update</span>
</span></code></pre></div>
<h2 id="tenant-and-namespace-model">Tenant and Namespace Model<a class="headerlink" href="#tenant-and-namespace-model" title="Permanent link">&para;</a></h2>
<h3 id="existence-enforcement">Existence Enforcement<a class="headerlink" href="#existence-enforcement" title="Permanent link">&para;</a></h3>
<p><strong>Wire protocol requirement</strong>: All data-plane operations must specify tenant and namespace.</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="p">{</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;publish&quot;</span><span class="p">,</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="w">  </span><span class="nt">&quot;tenant_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;acme-corp&quot;</span><span class="p">,</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="w">  </span><span class="nt">&quot;namespace&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;production&quot;</span><span class="p">,</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="w">  </span><span class="nt">&quot;stream&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;orders&quot;</span><span class="p">,</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="w">  </span><span class="nt">&quot;payload&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;...&quot;</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="p">}</span>
</span></code></pre></div>
<p><strong>Broker validation</strong>:</p>
<p>The broker enforces tenant/namespace existence:</p>
<ol>
<li>Broker syncs metadata from control plane</li>
<li>Broker maintains local registry of valid tenant/namespace pairs</li>
<li>Operations for unknown tenant/namespace are rejected with <code>error</code> response</li>
</ol>
<pre class="mermaid"><code>sequenceDiagram
    participant C as Client
    participant B as Broker
    participant CP as Control Plane

    CP-&gt;&gt;B: Sync metadata (tenants, namespaces)
    C-&gt;&gt;B: publish (tenant=unknown, ...)
    B--&gt;&gt;C: error (unknown tenant)

    C-&gt;&gt;B: publish (tenant=acme, namespace=prod, ...)
    B-&gt;&gt;B: Validate against registry
    B--&gt;&gt;C: ok</code></pre>
<h3 id="authorization-planned">Authorization (Planned)<a class="headerlink" href="#authorization-planned" title="Permanent link">&para;</a></h3>
<p>Future: ACL-based authorization per tenant/namespace/stream.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="nt">acls</span><span class="p">:</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">tenant</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">acme-corp</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">production</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="w">    </span><span class="nt">resource</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">orders</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="w">    </span><span class="nt">principal</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">service-account-1</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="w">    </span><span class="nt">permissions</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">publish</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">subscribe</span><span class="p p-Indicator">]</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">tenant</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">acme-corp</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">production</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="w">    </span><span class="nt">resource</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">analytics</span>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="w">    </span><span class="nt">principal</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">service-account-2</span>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="w">    </span><span class="nt">permissions</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">subscribe</span><span class="p p-Indicator">]</span>
</span></code></pre></div>
<p><strong>Enforcement points</strong>:
- Publish operations
- Subscribe operations
- Cache operations
- Control plane operations</p>
<h3 id="quota-enforcement-planned">Quota Enforcement (Planned)<a class="headerlink" href="#quota-enforcement-planned" title="Permanent link">&para;</a></h3>
<p>Future: Per-tenant and per-namespace quotas.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="nt">quotas</span><span class="p">:</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">tenant</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">acme-corp</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">production</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="w">    </span><span class="nt">publish_rate_limit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10000/s</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="w">    </span><span class="nt">subscribe_connections</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="w">    </span><span class="nt">cache_memory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10GB</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="w">    </span><span class="nt">stream_retention</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7d</span>
</span></code></pre></div>
<h2 id="consistency-across-components">Consistency Across Components<a class="headerlink" href="#consistency-across-components" title="Permanent link">&para;</a></h2>
<h3 id="broker-internal-consistency">Broker Internal Consistency<a class="headerlink" href="#broker-internal-consistency" title="Permanent link">&para;</a></h3>
<p>Within a single broker:</p>
<ul>
<li><strong>Publish-fanout ordering</strong>: Messages fan out in publish order</li>
<li><strong>Cache consistency</strong>: Single-writer per key (no torn writes)</li>
<li><strong>Subscription isolation</strong>: Independent queues prevent crosstalk</li>
</ul>
<h3 id="multi-broker-consistency-future">Multi-Broker Consistency (Future)<a class="headerlink" href="#multi-broker-consistency-future" title="Permanent link">&para;</a></h3>
<p>In a clustered deployment:</p>
<ul>
<li><strong>Shard leadership</strong>: Only one leader per shard</li>
<li><strong>Metadata consistency</strong>: Strongly consistent via RAFT control plane</li>
<li><strong>Cross-shard ordering</strong>: Not guaranteed</li>
<li><strong>Cache consistency</strong>: Eventually consistent across brokers</li>
</ul>
<h2 id="failure-scenarios-and-behavior">Failure Scenarios and Behavior<a class="headerlink" href="#failure-scenarios-and-behavior" title="Permanent link">&para;</a></h2>
<h3 id="network-partition">Network Partition<a class="headerlink" href="#network-partition" title="Permanent link">&para;</a></h3>
<p><strong>Publisher-Broker partition</strong>:</p>
<ul>
<li>Publisher detects connection loss (QUIC idle timeout)</li>
<li>Unacknowledged publishes are lost</li>
<li>Publisher must reconnect and retry</li>
</ul>
<p><strong>Subscriber-Broker partition</strong>:</p>
<ul>
<li>Subscriber detects connection loss</li>
<li>Buffered events are lost</li>
<li>Subscriber must reconnect and re-subscribe (starts from tail)</li>
</ul>
<p><strong>Broker-Control Plane partition</strong>:</p>
<ul>
<li>Broker continues serving with cached metadata</li>
<li>New stream creation fails</li>
<li>Existing streams continue operating</li>
<li>Broker reconciles when connection restored</li>
</ul>
<h3 id="broker-failure">Broker Failure<a class="headerlink" href="#broker-failure" title="Permanent link">&para;</a></h3>
<p><strong>Process crash</strong>:</p>
<ul>
<li>All in-memory state lost (ephemeral storage in MVP)</li>
<li>Clients detect connection loss</li>
<li>Clients must reconnect to recovered broker</li>
<li>Subscriptions must be re-established</li>
</ul>
<p><strong>Planned behavior with durability</strong>:</p>
<ul>
<li>Durable streams can replay from last checkpoint</li>
<li>Subscribers can resume from last acknowledged offset</li>
<li>Cache state can be rebuilt from log</li>
</ul>
<h3 id="slow-subscriber-behavior">Slow Subscriber Behavior<a class="headerlink" href="#slow-subscriber-behavior" title="Permanent link">&para;</a></h3>
<p><strong>Scenario</strong>: Subscriber processing slows down.</p>
<p><strong>Stages</strong>:</p>
<ol>
<li><strong>Buffer absorbs slowdown</strong>: Events accumulate in subscriber buffer</li>
<li><strong>Buffer fills</strong>: New events start getting dropped for that subscriber</li>
<li><strong>Other subscribers unaffected</strong>: Fast subscribers continue normally</li>
</ol>
<p><strong>Detection</strong> (future):</p>
<ul>
<li>Lag metrics exposed per subscription</li>
<li>Configurable alerts for subscribers falling behind</li>
<li>Optional disconnect of chronically slow subscribers</li>
</ul>
<div class="language-rust highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="c1">// Future API</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="kd">let</span><span class="w"> </span><span class="n">lag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">subscription</span><span class="p">.</span><span class="n">lag_metric</span><span class="p">().</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="k">if</span><span class="w"> </span><span class="n">lag</span><span class="p">.</span><span class="n">messages_behind</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1000</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="w">    </span><span class="n">warn</span><span class="o">!</span><span class="p">(</span><span class="s">&quot;Subscription falling behind: {} messages&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">lag</span><span class="p">.</span><span class="n">messages_behind</span><span class="p">);</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="p">}</span>
</span></code></pre></div>
<h2 id="testing-semantics">Testing Semantics<a class="headerlink" href="#testing-semantics" title="Permanent link">&para;</a></h2>
<h3 id="conformance-testing">Conformance Testing<a class="headerlink" href="#conformance-testing" title="Permanent link">&para;</a></h3>
<p>Applications can test semantic guarantees:</p>
<p><strong>Ordering test</strong>:</p>
<div class="language-rust highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="c1">// Publish ordered batch</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="kd">let</span><span class="w"> </span><span class="n">messages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="s">&quot;msg1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;msg2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;msg3&quot;</span><span class="p">];</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="n">client</span><span class="p">.</span><span class="n">publish_batch</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;orders&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">messages</span><span class="p">).</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="c1">// Verify subscriber receives in order</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="kd">let</span><span class="w"> </span><span class="n">events</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">collect_events</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">subscription</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">).</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="fm">assert_eq!</span><span class="p">(</span><span class="n">events</span><span class="p">,</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="s">&quot;msg1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;msg2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;msg3&quot;</span><span class="p">]);</span>
</span></code></pre></div>
<p><strong>Isolation test</strong>:</p>
<div class="language-rust highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="c1">// Start fast and slow subscribers</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">fast_sub</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">subscribe</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;stream&quot;</span><span class="p">).</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">slow_sub</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">subscribe</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;stream&quot;</span><span class="p">).</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="c1">// Slow subscriber delays processing</span>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="n">simulate_slow_processing</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">slow_sub</span><span class="p">);</span>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a>
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="c1">// Verify fast subscriber still receives all messages</span>
</span><span id="__span-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="kd">let</span><span class="w"> </span><span class="n">fast_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">count_events</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">fast_sub</span><span class="p">,</span><span class="w"> </span><span class="n">timeout</span><span class="p">).</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>
</span><span id="__span-17-10"><a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="fm">assert!</span><span class="p">(</span><span class="n">fast_count</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">expected_count</span><span class="p">);</span>
</span></code></pre></div>
<h2 id="summary-semantic-guarantees-matrix">Summary: Semantic Guarantees Matrix<a class="headerlink" href="#summary-semantic-guarantees-matrix" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Property</th>
<th>MVP Guarantee</th>
<th>Future Guarantee</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Pub/Sub delivery</strong></td>
<td>At-most-once</td>
<td>At-least-once, Exactly-once</td>
</tr>
<tr>
<td><strong>Message ordering</strong></td>
<td>Per-stream</td>
<td>Configurable cross-stream</td>
</tr>
<tr>
<td><strong>Subscriber isolation</strong></td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td><strong>Cache consistency</strong></td>
<td>Read-your-writes</td>
<td>Tunable (linearizable option)</td>
</tr>
<tr>
<td><strong>TTL precision</strong></td>
<td>Best-effort (~100ms)</td>
<td>Guaranteed</td>
</tr>
<tr>
<td><strong>Durability</strong></td>
<td>None (ephemeral)</td>
<td>Configurable per stream</td>
</tr>
<tr>
<td><strong>Authorization</strong></td>
<td>None</td>
<td>RBAC per resource</td>
</tr>
<tr>
<td><strong>Quotas</strong></td>
<td>None</td>
<td>Per-tenant, per-namespace</td>
</tr>
<tr>
<td><strong>Multi-key operations</strong></td>
<td>None</td>
<td>Transactions</td>
</tr>
</tbody>
</table>
<h2 id="recommendations">Recommendations<a class="headerlink" href="#recommendations" title="Permanent link">&para;</a></h2>
<h3 id="choosing-delivery-semantics">Choosing Delivery Semantics<a class="headerlink" href="#choosing-delivery-semantics" title="Permanent link">&para;</a></h3>
<p><strong>Use at-most-once (current MVP) when</strong>:
- Latest value is more important than history (sensor data, metrics)
- Occasional loss is acceptable (telemetry, monitoring)
- Throughput and latency matter more than guarantees
- Application implements own deduplication</p>
<p><strong>Use at-least-once (future) when</strong>:
- Every message matters (financial transactions, orders)
- Application can handle duplicates (idempotent processing)
- Durability matters more than latency</p>
<p><strong>Use exactly-once (future) when</strong>:
- Duplicates are unacceptable (billing, accounting)
- Application cannot easily deduplicate
- Willing to pay latency cost for guarantees</p>
<h3 id="cache-usage-patterns">Cache Usage Patterns<a class="headerlink" href="#cache-usage-patterns" title="Permanent link">&para;</a></h3>
<p><strong>Good cache use cases</strong>:
- Session data with TTL
- Configuration with infrequent updates
- Rate limiting counters (with planned atomic increment)
- Recently published message lookup</p>
<p><strong>Poor cache use cases</strong>:
- Strongly consistent shared state requiring transactions
- Large values (&gt; 1 MB) better served by object storage
- Frequently updated counters (better as pub/sub)</p>
<div class="admonition tip">
<p class="admonition-title">Design for Semantics</p>
<p>Design your application for the semantics Felix provides, not the semantics you wish it had. If you need stronger guarantees than MVP provides, layer them in your application or wait for planned features.</p>
</div>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="January 25, 2026 08:01:30 UTC"><span class="timeago" datetime="2026-01-25T08:01:30+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="January 25, 2026 08:01:30 UTC">2026-01-25</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="January 25, 2026 08:01:30 UTC"><span class="timeago" datetime="2026-01-25T08:01:30+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="January 25, 2026 08:01:30 UTC">2026-01-25</span>
  </span>

    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2026 Felix Authors
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/gabloe/felix" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.rust-lang.org/" target="_blank" rel="noopener" title="www.rust-lang.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="m508.5 249.8-21.8-13.5c-.2-2-.3-3.9-.5-5.9l18.7-17.5c.9-.9 1.6-1.9 2-3.1s.5-2.5.2-3.7-.8-2.4-1.6-3.3-1.8-1.7-3-2.1l-24-9c-.5-1.9-1.1-3.8-1.7-5.6l15-20.8c.7-1 1.2-2.2 1.3-3.4s0-2.5-.5-3.7-1.2-2.2-2.2-2.9-2.1-1.3-3.4-1.5l-25.4-4.2c-.9-1.7-1.8-3.4-2.7-5.2l10.7-23.4c.5-1.1.7-2.4.6-3.6s-.5-2.4-1.2-3.5-1.6-1.9-2.8-2.5-2.4-.8-3.6-.8l-25.8.9c-1.2-1.5-2.4-2.9-3.6-4.4l5.8-25.3c.3-1.2.3-2.5-.1-3.7s-1-2.3-1.9-3.2-2-1.5-3.2-1.9-2.5-.4-3.7-.1l-25.1 6c-1.4-1.2-2.9-2.4-4.4-3.6l.9-25.8c.1-1.3-.2-2.5-.8-3.6s-1.4-2.1-2.5-2.8-2.2-1.1-3.5-1.2-2.5.1-3.7.6l-23.3 10.7-5.1-2.7-4.2-25.4c-.2-1.2-.7-2.4-1.5-3.4s-1.8-1.7-2.9-2.2-2.4-.7-3.7-.5-2.4.6-3.4 1.3l-20.9 15c-1.9-.6-3.8-1.1-5.6-1.7l-9-24c-.4-1.2-1.2-2.2-2.1-3S307.2 5.2 306 5s-2.5-.2-3.7.2-2.3 1.1-3.1 2l-17.6 18.7c-2-.2-3.9-.4-5.9-.5L262.3 3.5c-.7-1.1-1.6-1.9-2.7-2.6S257.3 0 256 0s-2.5.3-3.6.9-2 1.5-2.7 2.6l-13.5 21.8c-2 .2-3.9.3-5.9.6L212.9 7.1c-.9-.9-1.9-1.6-3.1-2s-2.5-.5-3.7-.2-2.4.8-3.3 1.6-1.7 1.8-2.1 3l-9 24c-1.9.6-3.8 1.1-5.7 1.7l-20.8-15c-1-.7-2.2-1.2-3.4-1.3s-2.5 0-3.7.5-2.2 1.2-2.9 2.2-1.3 2.1-1.5 3.4l-4.2 25.4c-1.7.9-3.4 1.8-5.2 2.7l-23.4-10.5c-1.1-.5-2.4-.7-3.7-.6s-2.5.5-3.5 1.2-1.9 1.7-2.5 2.8-.8 2.4-.8 3.6l.9 25.8c-1.5 1.2-3 2.4-4.4 3.6l-25.1-6c-1.2-.3-2.5-.3-3.7.1s-2.3 1-3.2 1.9-1.5 2-1.9 3.2-.4 2.5-.1 3.7l6 25.1c-1.2 1.4-2.4 2.9-3.6 4.4l-25.8-.9c-1.3 0-2.5.2-3.6.8s-2.1 1.4-2.8 2.4-1.1 2.2-1.2 3.5.1 2.5.6 3.6l10.7 23.4c-.9 1.7-1.8 3.4-2.7 5.2l-25.4 4.1c-1.2.2-2.4.7-3.4 1.5s-1.7 1.8-2.2 2.9-.7 2.4-.5 3.7.6 2.4 1.3 3.4l15 20.8c-.6 1.9-1.1 3.8-1.7 5.7l-24 9c-1.2.4-2.2 1.2-3 2.1s-1.4 2.1-1.6 3.3-.2 2.5.2 3.7 1.1 2.3 2 3.1l18.7 17.5c-.2 2-.4 3.9-.6 5.9L3.5 249.8c-1.1.7-1.9 1.6-2.6 2.7s-.9 2.3-.9 3.6.3 2.5.9 3.6 1.5 2 2.6 2.7l21.8 13.5c.2 2 .3 3.9.6 5.9L7.1 299.1c-.9.9-1.6 1.9-2 3.1s-.5 2.5-.2 3.7.8 2.4 1.6 3.3 1.8 1.7 3 2.1l24 9c.6 1.9 1.1 3.8 1.7 5.6l-15 20.8c-.7 1-1.2 2.2-1.3 3.4s0 2.5.5 3.7 1.2 2.2 2.2 2.9 2.1 1.3 3.4 1.5l25.4 4.2 2.7 5.1-10.5 23.6c-.5 1.1-.7 2.4-.6 3.6s.5 2.5 1.2 3.5c.7 1.1 1.6 1.9 2.7 2.5s2.4.8 3.6.8l25.8-.9c1.2 1.5 2.4 2.9 3.6 4.4L73 430.2c-.3 1.2-.3 2.5.1 3.7s1 2.3 1.9 3.2 2 1.5 3.2 1.9 2.5.4 3.7.1l25.2-5.9c1.5 1.2 2.9 2.4 4.4 3.6l-.9 25.8c0 1.3.2 2.5.8 3.6s1.4 2.1 2.5 2.8 2.2 1.1 3.5 1.2 2.5-.1 3.6-.6l23.4-10.7 5.1 2.7 4.2 25.4c.2 1.2.7 2.4 1.5 3.4s1.8 1.8 2.9 2.2 2.4.7 3.7.5 2.4-.6 3.4-1.3l20.8-15c1.9.6 3.8 1.1 5.6 1.7l9 24c.4 1.2 1.2 2.2 2.1 3s2.1 1.4 3.3 1.6 2.5.2 3.7-.2 2.3-1.1 3.1-2l17.5-18.7c2 .2 3.9.4 5.9.6l13.5 21.8c.7 1.1 1.6 1.9 2.7 2.6s2.3.9 3.6.9 2.5-.3 3.6-.9 2-1.5 2.7-2.6l13.5-21.8c2-.2 3.9-.3 5.9-.6l17.5 18.7c.9.9 1.9 1.6 3.1 2s2.5.5 3.7.2 2.4-.8 3.3-1.6 1.7-1.8 2.1-3l9-24c1.9-.6 3.8-1.1 5.6-1.7l20.8 15c1 .7 2.2 1.2 3.4 1.3s2.5 0 3.7-.5 2.2-1.2 2.9-2.2 1.3-2.1 1.5-3.4l4.2-25.4 5.1-2.7 23.4 10.7c1.1.5 2.4.7 3.6.6s2.4-.5 3.5-1.2 1.9-1.6 2.5-2.8.8-2.4.8-3.6l-.9-25.8c1.5-1.2 2.9-2.4 4.4-3.6l25.2 5.9c1.2.3 2.5.3 3.7-.1s2.3-1 3.2-1.9 1.5-2 1.9-3.2.4-2.5.1-3.7l-5.9-25.2c1.2-1.4 2.4-2.9 3.6-4.4l25.8.9c1.3.1 2.5-.2 3.6-.8s2.1-1.4 2.8-2.5c.7-1 1.1-2.2 1.2-3.5s-.1-2.5-.6-3.6l-10.7-23.4 2.7-5.1 25.4-4.2c1.2-.2 2.4-.7 3.4-1.5s1.8-1.8 2.2-2.9.7-2.4.5-3.7-.6-2.4-1.3-3.4l-15-20.8c.6-1.9 1.1-3.8 1.7-5.6l24-9c1.2-.4 2.2-1.2 3-2.1s1.4-2.1 1.6-3.3.2-2.5-.2-3.7-1.1-2.3-2-3.1l-18.7-17.5c.2-1.9.4-3.9.6-5.9l21.8-13.5c1.1-.7 1.9-1.6 2.6-2.7s.9-2.3.9-3.6-.3-2.5-.9-3.6-1.5-2-2.6-2.7m-151 129.1c-3.6-.8-7.4-.1-10.5 1.9s-5.3 5.2-6 8.8l-7.6 35.7c-24.6 11.1-51.3 16.8-78.3 16.7s-53.6-6.1-78.1-17.4l-7.6-35.7c-.4-1.8-1.1-3.5-2.1-5s-2.4-2.8-3.9-3.8-3.2-1.7-5-2-3.6-.3-5.4.1l-31.5 6.8c-5.8-6-11.3-12.5-16.3-19.2h153.2c1.7 0 2.9-.3 2.9-1.9v-54.2c0-1.6-1.2-1.9-2.9-1.9h-44.8v-34.4h48.5c4.4 0 23.7 1.3 29.8 25.9 1.9 7.5 6.2 32.1 9.1 40 2.9 8.8 14.6 26.5 27.1 26.5h79c-5.3 7.1-11.1 13.8-17.3 20.1l-32.1-6.9zm25.8 34.5c0 3-.9 6-2.6 8.5s-4 4.5-6.8 5.6-5.8 1.5-8.8.9-5.7-2-7.8-4.2-3.6-4.8-4.2-7.8-.3-6 .8-8.8 3.1-5.2 5.6-6.9 5.4-2.6 8.5-2.6h.4c4 .1 7.7 1.8 10.5 4.6s4.3 6.7 4.3 10.6h.1zm-225.6-.7c0 3-.9 6-2.6 8.5s-4.1 4.5-6.8 5.6-5.8 1.5-8.8.9-5.7-2-7.8-4.2-3.6-4.8-4.2-7.8-.3-6 .9-8.8 3.1-5.2 5.6-6.8 5.4-2.6 8.5-2.6h.5c4 .1 7.7 1.8 10.5 4.6s4.3 6.7 4.3 10.6h.1zM69.6 234.2l32.8-14.6c1.7-.7 3.2-1.8 4.4-3.1s2.2-2.9 2.9-4.6 1-3.5.9-5.3-.5-3.6-1.2-5.3l-6.8-15.2h26.6v119.7H75.6c-6.6-23.2-8.7-47.6-6.1-71.6zm-11.3-36.1c0-2 .4-4 1.2-5.8s1.9-3.5 3.3-4.9 3.1-2.5 4.9-3.3 3.8-1.2 5.8-1.2h.5c3 .1 5.9 1 8.3 2.8s4.3 4.1 5.4 6.9 1.3 5.8.7 8.8-2.1 5.6-4.3 7.7-4.9 3.5-7.8 4.1-6 .2-8.7-.9-5.1-3.1-6.8-5.6-2.5-5.4-2.5-8.4zm155.2 24.5v-35.3h63.3c3.3 0 23.1 3.8 23.1 18.6 0 12.3-15.2 16.7-27.7 16.7zM399 306.7c-9.8 1.1-20.6-4.1-22-10.1-5.8-32.5-15.4-39.4-30.6-51.4 18.9-12 38.5-29.6 38.5-53.3 0-25.5-17.5-41.6-29.4-49.5-16.8-11-35.3-13.2-40.3-13.2H116.3c27.5-30.7 64.4-51.5 104.9-59.2l23.5 24.6c1.3 1.3 2.8 2.4 4.4 3.1s3.5 1.1 5.3 1.2 3.6-.3 5.3-.9 3.2-1.7 4.6-2.9l26.3-25c26.8 5 52.1 15.8 74.3 31.6s40.6 36.2 54.1 59.9l-18 40.6c-1.5 3.4-1.5 7.2-.2 10.6s3.9 6.2 7.3 7.7l34.6 15.3c1.1 10.8 1.2 21.7.4 32.5h-19.3c-1.9 0-2.7 1.3-2.7 3.1v8.8c0 20.8-11.7 25.3-22 26.5zM240 60.2c0-4 1.6-7.9 4.5-10.7s6.7-4.5 10.7-4.5h.4c3 .1 5.9 1 8.4 2.8s4.3 4.1 5.4 6.9 1.3 5.8.7 8.8-2.1 5.6-4.3 7.7-4.9 3.5-7.8 4-6 .2-8.7-.9-5.1-3.1-6.8-5.6-2.5-5.4-2.5-8.4zM436.8 214c-2 0-4-.4-5.8-1.2s-3.5-1.9-4.9-3.3-2.5-3.1-3.3-4.9-1.2-3.8-1.2-5.8.4-4 1.2-5.8 1.9-3.5 3.3-4.9 3.1-2.5 4.9-3.3 3.8-1.2 5.8-1.2h.4c4 .1 7.9 1.7 10.7 4.6s4.4 6.8 4.3 10.8-1.7 7.9-4.6 10.7-6.8 4.4-10.8 4.3"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../js/timeago.min.js"></script>
      
        <script src="../../js/timeago_mkdocs_material.js"></script>
      
    
  </body>
</html>